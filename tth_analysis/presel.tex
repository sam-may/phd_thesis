Events passing the diphoton preselection, described in Sec.~\ref{sec:evt_photon_sel}, are eligible to enter one of two exclusive channels.
The hadronic channel targets \ttH events in which the \ttb pair decays fully hadronically, while the leptonic channel targets events in which at least one of the top (anti-)quarks decays leptonically.
The channels are defined to be orthogonal through selections on the number of leptons in the event: the leptonic channel requires at least one lepton and the hadronic channel requires exactly zero leptons.

Each channel then places an additional set of requirements on the events which enter.
The hadronic channel requires at least three jets, one of which must be identified as originating from a b quark.
Jets are identified as originating from a b quark using the DeepCSV b score, with a working point that corresponds to a 10\% misidentification rate for jets originating from light quarks or gluons.
The leptonic channel requires at least one jet, with no requirement on the jet flavor.
